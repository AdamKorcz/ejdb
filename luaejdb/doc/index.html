<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>EJDB</h1>


<h2>Contents</h2>
<ul>
<li><a href="#Functions">Functions</a></li>
<li><a href="#Tables">Tables</a></li>
</ul>


<h2>Modules</h2>
<ul>
  <li><strong>ejdb</strong></li>
</ul>

</div>

<div id="content">

<h1>Module <code>ejdb</code></h1>

<p>The Lua binding of EJDB database.<br/>
 <a href="http://ejdb.org">http://ejdb.org</a></p>
<p>

</p>


<h2><a href="#Functions">Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#open">open&nbsp;(path, mode)</a></td>
	<td class="summary">Opens EJDB database.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#close">close&nbsp;()</a></td>
	<td class="summary">Closes opened database.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#toOID">toOID&nbsp;(val)</a></td>
	<td class="summary">Converts string OID into BSON oid table.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#toDate">toDate&nbsp;(val)</a></td>
	<td class="summary">Converts os.time table (or number of seconds since epoch) into BSON_DATE.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#toDateNow">toDateNow&nbsp;()</a></td>
	<td class="summary">Converts current time into BSON_DATE.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#toRegexp">toRegexp&nbsp;(re, opts)</a></td>
	<td class="summary">Builds BSON_REGEX value</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#toBinData">toBinData&nbsp;(val)</a></td>
	<td class="summary">Converts lua string into BSON_BINDATA value</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#toNull">toNull&nbsp;()</a></td>
	<td class="summary">Builds BSON_NULL value</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#toUndefined">toUndefined&nbsp;()</a></td>
	<td class="summary">Builds BSON_UNDEFINED value</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#DB.toOID">DB.toOID&nbsp;(val)</a></td>
	<td class="summary">Converts string OID into BSON oid table.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#DB.toDate">DB.toDate&nbsp;(val)</a></td>
	<td class="summary">Converts os.time table or number of secods integer into BSON_DATE.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#DB.toDateNow">DB.toDateNow&nbsp;()</a></td>
	<td class="summary">Converts current time into BSON_DATE.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#DB.toRegexp">DB.toRegexp&nbsp;(re, opts)</a></td>
	<td class="summary">Builds BSON_REGEX value.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#DB.toBinData">DB.toBinData&nbsp;(val)</a></td>
	<td class="summary">Converts lua string into BSON_BINDATA value.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#DB.toNull">DB.toNull&nbsp;()</a></td>
	<td class="summary">Builds BSON_NULL value.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#DB.toUndefined">DB.toUndefined&nbsp;()</a></td>
	<td class="summary">Builds BSON_UNDEFINED value .</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#DB:save">DB:save&nbsp;(cname, obj, ...)</a></td>
	<td class="summary">Save/update specified JSON objects in the collection.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#DB:find">DB:find&nbsp;(cname, q)</a></td>
	<td class="summary">Execute query on collection.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Q:Eq">Q:Eq&nbsp;(val)</a></td>
	<td class="summary">Field eq restriction.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Q:ElemMatch">Q:ElemMatch&nbsp;(val)</a></td>
	<td class="summary">Element match construction.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Q:Not">Q:Not&nbsp;(val)</a></td>
	<td class="summary">The $not negatiation for <code>val</code> block</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Q:Gt">Q:Gt&nbsp;(val)</a></td>
	<td class="summary">Greater than (val > arg)</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Q:Gte">Q:Gte&nbsp;(val)</a></td>
	<td class="summary">Greater than or equal (val >= arg)</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Q:Lt">Q:Lt&nbsp;(val)</a></td>
	<td class="summary">Lesser than (val &lt; arg)</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Q:Lte">Q:Lte&nbsp;(val)</a></td>
	<td class="summary">Lesser than or equal (val &lt;= arg)</td>
	</tr>
</table>
<h2><a href="#Tables">Tables</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#Q">Q</a></td>
	<td class="summary">Query/JSON builder is used to create EJDB queries or JSON objects with
 preserverd keys order (Unlike lua tables).</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#DB">DB</a></td>
	<td class="summary">Database itself.</td>
	</tr>
</table>

<br/>
<br/>


    <h2><a name="Functions"></a>Functions</h2>
    <dl class="function">
    <dt>
    <a name = "open"></a>
    <strong>open&nbsp;(path, mode)</strong>
    </dt>
    <dd>
    Opens EJDB database.
 <code><code>w</code></code> Open as a writer <br/>
 <code><code>r</code></code> Open as a reader <br/>
 <code><code>c</code></code> Create db if it not exists <br/>
 <code><code>t</code></code> Truncate existing db <br/>
 <code><code>s</code></code> Sycn db after each transaction <br/>
 Default open mode: <code><code>rws</code></code>

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">path</span>
         {String} Database main file</li>
        <li><span class="parameter">mode</span>
         {String?} Database open mode flags:<br/></li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Database table
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="keyword">local</span> db = ejdb.open(<span class="string">"foodb"</span>, <span class="string">"wrc"</span>)</pre>
    </ul>

</dd>
    <dt>
    <a name = "close"></a>
    <strong>close&nbsp;()</strong>
    </dt>
    <dd>
    Closes opened database.






</dd>
    <dt>
    <a name = "toOID"></a>
    <strong>toOID&nbsp;(val)</strong>
    </dt>
    <dd>
    Converts string OID into BSON oid table.

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">val</span>
         {String} 24 hex chars BSON_OID</li>
    </ul>





</dd>
    <dt>
    <a name = "toDate"></a>
    <strong>toDate&nbsp;(val)</strong>
    </dt>
    <dd>
    Converts os.time table (or number of seconds since epoch) into BSON_DATE.

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">val</span>


</li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        BSON_DATE table.
    </ol>



    <h3>Usage:</h3>
    <ul>
        <li><pre class="example">ejdb.toDate({ year = <span class="number">2013</span>, month = <span class="number">1</span>, day = <span class="number">1</span>, hour = <span class="number">0</span>, sec = <span class="number">1</span> })</pre></li>
        <li><pre class="example">ejdb.toDate(<span class="number">1363705285431</span>)</pre></li>
    </ul>

</dd>
    <dt>
    <a name = "toDateNow"></a>
    <strong>toDateNow&nbsp;()</strong>
    </dt>
    <dd>
    Converts current time into BSON_DATE.






</dd>
    <dt>
    <a name = "toRegexp"></a>
    <strong>toRegexp&nbsp;(re, opts)</strong>
    </dt>
    <dd>
    Builds BSON_REGEX value

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">re</span>
         {String} Regular expression</li>
        <li><span class="parameter">opts</span>
         {String} Regular expression flags</li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        BSON_REGEX table value
    </ol>




</dd>
    <dt>
    <a name = "toBinData"></a>
    <strong>toBinData&nbsp;(val)</strong>
    </dt>
    <dd>
    Converts lua string into BSON_BINDATA value

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">val</span>


</li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        BSON_BINDATA table value
    </ol>




</dd>
    <dt>
    <a name = "toNull"></a>
    <strong>toNull&nbsp;()</strong>
    </dt>
    <dd>
    Builds BSON_NULL value


    <h3>Returns:</h3>
    <ol>

        BSON_NULL table value
    </ol>




</dd>
    <dt>
    <a name = "toUndefined"></a>
    <strong>toUndefined&nbsp;()</strong>
    </dt>
    <dd>
    Builds BSON_UNDEFINED value


    <h3>Returns:</h3>
    <ol>

        BSON_UNDEFINED table value
    </ol>




</dd>
    <dt>
    <a name = "DB.toOID"></a>
    <strong>DB.toOID&nbsp;(val)</strong>
    </dt>
    <dd>
    Converts string OID into BSON oid table.

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">val</span>


</li>
    </ul>



    <h3>see also:</h3>
    <ul>
         <a href="index.html#toOID">ejdb.toOID</a>
    </ul>


</dd>
    <dt>
    <a name = "DB.toDate"></a>
    <strong>DB.toDate&nbsp;(val)</strong>
    </dt>
    <dd>
    Converts os.time table or number of secods integer into BSON_DATE.

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">val</span>


</li>
    </ul>



    <h3>see also:</h3>
    <ul>
         <a href="index.html#toDate">ejdb.toDate</a>
    </ul>


</dd>
    <dt>
    <a name = "DB.toDateNow"></a>
    <strong>DB.toDateNow&nbsp;()</strong>
    </dt>
    <dd>
    Converts current time into BSON_DATE.




    <h3>see also:</h3>
    <ul>
         <a href="index.html#toDateNow">ejdb.toDateNow</a>
    </ul>


</dd>
    <dt>
    <a name = "DB.toRegexp"></a>
    <strong>DB.toRegexp&nbsp;(re, opts)</strong>
    </dt>
    <dd>
    Builds BSON_REGEX value.

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">re</span>


</li>
        <li><span class="parameter">opts</span>


</li>
    </ul>



    <h3>see also:</h3>
    <ul>
         <a href="index.html#toRegexp">ejdb.toRegexp</a>
    </ul>


</dd>
    <dt>
    <a name = "DB.toBinData"></a>
    <strong>DB.toBinData&nbsp;(val)</strong>
    </dt>
    <dd>
    Converts lua string into BSON_BINDATA value.

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">val</span>


</li>
    </ul>



    <h3>see also:</h3>
    <ul>
         <a href="index.html#toBinData">ejdb.toBinData</a>
    </ul>


</dd>
    <dt>
    <a name = "DB.toNull"></a>
    <strong>DB.toNull&nbsp;()</strong>
    </dt>
    <dd>
    Builds BSON_NULL value.




    <h3>see also:</h3>
    <ul>
         <a href="index.html#toNull">ejdb.toNull</a>
    </ul>


</dd>
    <dt>
    <a name = "DB.toUndefined"></a>
    <strong>DB.toUndefined&nbsp;()</strong>
    </dt>
    <dd>
    Builds BSON_UNDEFINED value .




    <h3>see also:</h3>
    <ul>
         <a href="index.html#toUndefined">ejdb.toUndefined</a>
    </ul>


</dd>
    <dt>
    <a name = "DB:save"></a>
    <strong>DB:save&nbsp;(cname, obj, ...)</strong>
    </dt>
    <dd>
    Save/update specified JSON objects in the collection.
 If collection with <code>cname</code> does not exists it will be created.
 Each persistent object has unique identifier (OID) placed in the <code>_id</code> property.
 If a saved object does not have <code>_id</code> it will be autogenerated.
 To identify and update object it should contains <code>_id</code> property.
 already persisted in db.

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">cname</span>
         {String} Name of collection.</li>
        <li><span class="parameter">obj</span>
         Lua table or <a href="#Q">Q</a> represents JSON object.</li>
        <li><span class="parameter">...</span>
         If last argument is True a saved object will be merged with who's</li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <li><pre class="example">dQ:save(<span class="string">"parrots2"</span>, {foo = <span class="string">"bar"</span>})</pre></li>
        <li><pre class="example">dQ:save(<span class="string">"parrots2"</span>, Q(<span class="string">"foo"</span>, <span class="string">"bar"</span>), <span class="keyword">true</span>) -- merge option is on</pre></li>
    </ul>

</dd>
    <dt>
    <a name = "DB:find"></a>
    <strong>DB:find&nbsp;(cname, q)</strong>
    </dt>
    <dd>

<p>Execute query on collection. </p>

<p> EJDB queries inspired by MongoDB (mongodb.org) and follows same philosophy.
 - Supported queries:</p>
<pre><code>- Simple matching of String OR Number OR Array value:
    -   {'fpath' : 'val', ...}
- $not Negate operation.
    -   {'fpath' : {'$not' : val}} //Field not equal to val
    -   {'fpath' : {'$not' : {'$begin' : prefix}}} //Field not begins with val
- $begin String starts with prefix
    -   {'fpath' : {'$begin' : prefix}}
- $gt, $gte (&gt;, &gt;=) and $lt, $lte for number types:
    -   {'fpath' : {'$gt' : number}, ...}
- $bt Between for number types:
    -   {'fpath' : {'$bt' : [num1, num2]}}
- $in String OR Number OR Array val matches to value in specified array:
    -   {'fpath' : {'$in' : [val1, val2, val3]}}
- $nin - Not IN
- $strand String tokens OR String array val matches all tokens in specified array:
    -   {'fpath' : {'$strand' : [val1, val2, val3]}}
- $stror String tokens OR String array val matches any token in specified array:
    -   {'fpath' : {'$stror' : [val1, val2, val3]}}
- $exists Field existence matching:
    -   {'fpath' : {'$exists' : true|false}}
- $icase Case insensitive string matching:
    -    {'fpath' : {'$icase' : 'val1'}} //icase matching
          icase matching with '$in' operation:
    -    {'name' : {'$icase' : {'$in' : ['HEllo', 'heLLo WorlD']}}}
         For case insensitive matching you can create special type of string index.
- $elemMatch The $elemMatch operator matches more than one component within an array element.
    -    { array: { $elemMatch: { value1 : 1, value2 : { $gt: 1 } } } }
          Restriction: only one $elemMatch allowed in context of one array field.
</code></pre>

<ul>
    <li><p>Queries can be used to update records:</p>

<p>$set Field set operation.</p>
<pre><code>- {.., '$set' : {'field1' : val1, 'fieldN' : valN}}
</code></pre>
<p>$upsert Atomic upsert. If matching records are found it will be '$set' operation,</p>
<pre><code>    otherwise new record will be inserted
    with fields specified by argment object.
- {.., '$upsert' : {'field1' : val1, 'fieldN' : valN}}
</code></pre>
<p>$inc Increment operation. Only number types are supported.</p>
<pre><code>- {.., '$inc' : {'field1' : number, ...,  'field1' : number}
</code></pre>
<p>$dropall In-place record removal operation.</p>
<pre><code>- {.., '$dropall' : true}
</code></pre>
<p>$addToSet Atomically adds value to the array only if its not in the array already.</p>
<pre><code>        If containing array is missing it will be created.
- {.., '$addToSet' : {'fpath' : val1, 'fpathN' : valN, ...}}
</code></pre>
<p>$addToSetAll Batch version if $addToSet</p>
<pre><code>- {.., '$addToSetAll' : {'fpath' : [array of values to add], ...}}
</code></pre>
<p>$pull Atomically removes all occurrences of value from field, if field is an array.</p>
<pre><code>- {.., '$pull' : {'fpath' : val1, 'fpathN' : valN, ...}}
</code></pre>
<p>$pullAll Batch version of $pull</p>
<pre><code>- {.., '$pullAll' : {'fpath' : [array of values to remove], ...}}
</code></pre></li>
    <li><p>Collection joins supported in the following form:</p>

<pre><code>{..., $do : {fpath : {$join : 'collectionname'}} }
 Where 'fpath' value points to object's OIDs from 'collectionname'. Its value
 can be OID, string representation of OID or array of this pointers.
</code></pre></li>
</ul>

<p>  NOTE: It is better to execute update queries with <code>$onlycount=true</code> hint flag</p>
<pre><code>    or use the special `update()` method to avoid unnecessarily data fetching.
</code></pre>
<p>  NOTE: Negate operations: $not and $nin not using indexes</p>
<pre><code>    so they can be slow in comparison to other matching operations.
</code></pre>
<p>  NOTE: Only one index can be used in search query operation.
  NOTE: If callback is not provided this function will be synchronous.</p>

<p>  QUERY HINTS (specified by <code>hints</code> argument):</p>
<pre><code>- $max Maximum number in the result set
- $skip Number of skipped results in the result set
- $orderby Sorting order of query fields.
- $onlycount true|false If `true` only count of matching records will be returned
                        without placing records in result set.
- $fields Set subset of fetched fields.
    If field presented in $orderby clause it will be forced to include in resulting records.
    Example:
    hints:    {
                "$orderby" : { //ORDER BY field1 ASC, field2 DESC
                    "field1" : 1,
                    "field2" : -1
                 },
                "$fields" : { //SELECT ONLY {_id, field1, field2}
                    "field1" : 1,
                    "field2" : 1
                }
              }
</code></pre>
<p> To traverse selected records cursor object is returned.
 Cursor (res):</p>
<pre><code>#res - length of result set
res[i] - BSON representations of object as lua string
res:object(i) - Lua table constructed from BSON data
res:field(i, &lt;field name&gt;) - Lua value of fetched BSON object
res() - Creates iterator for pairs (obj, idx)
      where obj - Lua table constructed from BSON data
            idx - Index of fetched object in the result set
</code></pre>

<p> Examples:</p>
<pre><code>for i = 1, #res do
  local ob = res:object(i)
  ...
end
</code></pre>

<p> OR</p>

<pre><code>for i = 1, #res do
  res:field(i, "json field name")
  ...
end
</code></pre>

<p> OR</p>

<pre><code>for vobj, idx in res() do
  -- vobj is a lua table representation of fetched json object
  vobj["json field name"]
  ...
end
</code></pre>




    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">cname</span>
         {String} Name of collection</li>
        <li><span class="parameter">q</span>
         {table|Q} JSON query object</li>
    </ul>



    <h3>see also:</h3>
    <ul>
         <a href="index.html#Q">Q</a>
    </ul>


</dd>
    <dt>
    <a name = "Q:Eq"></a>
    <strong>Q:Eq&nbsp;(val)</strong>
    </dt>
    <dd>

<p>Field eq restriction. </p>
<pre><code>{fname : fval}
</code></pre>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">val</span>


</li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <li><pre class="example">Q():F(<span class="string">"fname"</span>):Eq(&lt;fval&gt;)</pre></li>
        <li><pre class="example">Q(<span class="string">"fname"</span>, &lt;fval&gt;)</pre></li>
    </ul>

</dd>
    <dt>
    <a name = "Q:ElemMatch"></a>
    <strong>Q:ElemMatch&nbsp;(val)</strong>
    </dt>
    <dd>

<p>Element match construction. </p>
<pre><code>- $elemMatch The $elemMatch operator matches more than one component within an array element.
  -    { array: { $elemMatch: { value1 : 1, value2 : { $gt: 1 } } } }
    Restriction: only one $elemMatch allowed in context of one array field.
</code></pre>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">val</span>


</li>
    </ul>





</dd>
    <dt>
    <a name = "Q:Not"></a>
    <strong>Q:Not&nbsp;(val)</strong>
    </dt>
    <dd>
    The $not negatiation for <code>val</code> block

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">val</span>


</li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">Q():Not(Q(<span class="string">"foo"</span>, <span class="string">"bar"</span>)) =&gt; {<span class="string">"$not"</span> : {<span class="string">"foo"</span> : <span class="string">"bar"</span>}}</pre>
    </ul>

</dd>
    <dt>
    <a name = "Q:Gt"></a>
    <strong>Q:Gt&nbsp;(val)</strong>
    </dt>
    <dd>
    Greater than (val > arg)

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">val</span>


</li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">Q():F(<span class="string">"age"</span>):Gt(<span class="number">29</span>) =&gt; {<span class="string">"age"</span> : {<span class="string">"$gt"</span> : <span class="number">29</span>}}</pre>
    </ul>

</dd>
    <dt>
    <a name = "Q:Gte"></a>
    <strong>Q:Gte&nbsp;(val)</strong>
    </dt>
    <dd>
    Greater than or equal (val >= arg)

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">val</span>


</li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">Q():F(<span class="string">"age"</span>):Gt(<span class="number">29</span>) =&gt; {<span class="string">"age"</span> : {<span class="string">"$gte"</span> : <span class="number">29</span>}}</pre>
    </ul>

</dd>
    <dt>
    <a name = "Q:Lt"></a>
    <strong>Q:Lt&nbsp;(val)</strong>
    </dt>
    <dd>
    Lesser than (val &lt; arg)

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">val</span>


</li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">Q():F(<span class="string">"age"</span>):Lt(<span class="number">29</span>) =&gt; {<span class="string">"age"</span> : {<span class="string">"$lt"</span> : <span class="number">29</span>}}</pre>
    </ul>

</dd>
    <dt>
    <a name = "Q:Lte"></a>
    <strong>Q:Lte&nbsp;(val)</strong>
    </dt>
    <dd>
    Lesser than or equal (val &lt;= arg)

    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">val</span>


</li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">Q():F(<span class="string">"age"</span>):Lt(<span class="number">29</span>) =&gt; {<span class="string">"age"</span> : {<span class="string">"$lte"</span> : <span class="number">29</span>}}</pre>
    </ul>

</dd>
</dl>
    <h2><a name="Tables"></a>Tables</h2>
    <dl class="function">
    <dt>
    <a name = "Q"></a>
    <strong>Q</strong>
    </dt>
    <dd>
    Query/JSON builder is used to create EJDB queries or JSON objects with
 preserverd keys order (Unlike lua tables). </p>

<p> Examples:




    <h3>see also:</h3>
    <ul>
         <li><a href="index.html#Q:Eq">Q:Eq</a></li>
         <li><a href="index.html#Q:ElemMatch">Q:ElemMatch</a></li>
         <li><a href="index.html#Q:Not">Q:Not</a></li>
         <li><a href="index.html#Q:Gt">Q:Gt</a></li>
         <li><a href="index.html#Q:Gte">Q:Gte</a></li>
         <li><a href="index.html#Q:Lt">Q:Lt</a></li>
         <li><a href="index.html#Q:Lte">Q:Lte</a></li>
    </ul>

    <h3>Usage:</h3>
    <ul>
        <li><pre class="example">Q(<span class="string">"foo"</span>, <span class="string">"bar"</span>)</pre></li>
        <li><pre class="example">Q(<span class="string">"likes"</span>, <span class="string">"toys"</span>):OrderBy(<span class="string">"name asc"</span>, <span class="string">"age desc"</span>)</pre></li>
        <li><pre class="example">Q(<span class="string">"name"</span>, <span class="string">"Andy"</span>):F(<span class="string">"_id"</span>):Eq(<span class="string">"510f7fa91ad6270a00000000"</span>):F(<span class="string">"age"</span>):Gt(<span class="number">20</span>):Lt(<span class="number">40</span>):F(<span class="string">"score"</span>):In({ <span class="number">11</span>, <span class="number">22.12333</span>, <span class="number">1362835380447</span>, db.toNull() }):Max(<span class="number">232</span>)</pre></li>
        <li><pre class="example">Q():Or(Q(<span class="string">"foo"</span>, <span class="string">"bar"</span>), Q(<span class="string">"foo"</span>, <span class="string">"bar6"</span>)):OrderBy({ foo = <span class="number">1</span> })</pre></li>
    </ul>

</dd>
    <dt>
    <a name = "DB"></a>
    <strong>DB</strong>
    </dt>
    <dd>
    Database itself.






</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.3</a></i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
